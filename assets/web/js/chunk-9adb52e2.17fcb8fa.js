(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9adb52e2","chunk-47fc06be"],{"0a1a":function(e,t,a){},1172:function(e,t,a){},1215:function(e,t,a){"use strict";a("1172")},"1cdd":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"row",staticStyle:{position:"relative"}},[a("button",{class:e.disable?"btn btn-disable":"btn",staticStyle:{width:"100%",border:"1px solid #bdbdbd","border-radius":"5px","text-align":"left"},on:{click:function(t){return t.preventDefault(),e.toggleElement()}}},[e._v(" "+e._s(e.valeurSelectionner)+" ")]),e.canDelete?a("span",{staticClass:"deactivate",on:{click:function(t){return t.preventDefault(),e.removeElement()}}},[a("i",{staticClass:"fa-solid fa-circle-xmark"})]):e._e()]),e.show?a("div",{staticClass:"row"},[a("div",{staticStyle:{margin:"5px auto",width:"98%"}},[e.showCount>0?a("AgGridSearch",{attrs:{columnDefs:e.columns,extrasData:e.extrasData,filterFields:e.columnsFilter,url:e.url,"filter-key":e.filterKey,"filter-value":e.filterValue,paginationPageSize:10}}):e._e()],1)]):e._e()])])},i=[],s=a("2909"),o=(a("99af"),a("4de4"),a("caad"),a("d81d"),a("14d9"),a("d3b7"),a("2532"),a("159b"),a("99d2")),n=a("27c5"),l={name:"CustomSelect1",components:{AgGridSearch:o["a"],AgGridBtnClicked:n["a"]},props:{columnDefs:{default:[]},extrasData:{default:{}},filterFields:{default:[]},url:{default:""},filterKey:{default:[]},filterValue:{default:[]},renderCallBack:{},selectCallBack:{},oldValue:{default:{}},disable:{default:!1},placeHolder:{default:"Veuillez selectionner un element"},multiple:{default:!1}},data:function(){return{rendu:null,show:!1,selectElement:[],lastQuery:0,baseData:[],tableKey:0,showCount:0}},mounted:function(){this.rendu=this.placeHolder,this.baseData=[],this.baseData.push(this.oldValue),console.log("customSelectConsole  paramettre passer ",this.baseData,this.oldValue)},computed:{columns:function(){var e=this,t=this.columnDefs.map((function(e){return e.hide=!0,e}));return[{field:null,headerName:"",suppressCellSelection:!0,wrapText:!0,autoHeight:!0,cellRendererSelector:function(t){var a=e.renderCallBack(t.data);console.log("element rerendu",t.data.id,e.selectElement);var r='<div style="width:100%;display:flex;text-align:left;align-items: center;"><span>'.concat(a,"</span> </div>");return e.selectElement.includes(t.data.id)&&(r='<div  style="width:100%;display:flex;text-align:left;align-items: center;"><span style="color:#8ee866">'.concat(a,"</span></div>")),{component:"AgGridBtnClicked",params:{clicked:function(a){e.clickElement(a,t)},render:r}}}}].concat(Object(s["a"])(t))},columnsFilter:function(){var e=this.columnDefs.map((function(e){return e.field}));return e},valeurSelectionner:function(){var e=this,t=this.placeHolder;return this.baseData.forEach((function(a){console.log("customSelectConsole  foreach ",a);try{t=e.renderCallBack(a)}catch(a){}})),console.log("customSelectConsole  valeurSelectionner rendu ",t,this.baseData),""!=t&&null!=t&&"undefined"!==t||(t=this.placeHolder),t},canDelete:function(){return""!=this.valeurSelectionner&&"Veuillez selectionnez un element"!=this.valeurSelectionner}},methods:{updateFilter:function(){try{delete this.params.api["__extraFilter__".concat(this.colId)]}catch(t){}console.log("voila les paramettre passer filter 1 ");var e={};e["keys"]=this.colId,e["values"]={filterType:"set",values:this.selectElement},this.params.api.get,this.selectElement.length>0&&(this.params.api["__extraFilter__".concat(this.colId)]=e),this.lastQuery=this.selectElement.length,this.params.filterChangedCallback()},doesFilterPass:function(e){return e.data.year>=2010},isFilterActive:function(){return this.lastQuery>0},getModel:function(){},setModel:function(e){return{filterType:"set",values:[1,5,6]}},clickElement:function(e,t){console.log("on as sectionner un element",e),this.baseData=[],this.baseData.push(e);try{this.selectCallBack(e),this.toggleElement()}catch(a){}try{this.selectElement.includes(e.id)?this.selectElement=this.selectElement.filter((function(t){return t!=e.id})):this.multiple?this.selectElement.push(e.id):this.selectElement=[e.id]}catch(a){}console.log("on as sectionner un element",this.baseData),t.api.refreshCells()},toggleElement:function(){console.log("on veut supprimer toggleElement",this.disable,this.show),this.disable||(this.show=!this.show),this.showCount++},removeElement:function(){if(!this.disable){this.show=!1,this.baseData=[];try{this.selectCallBack({id:null})}catch(e){}}}}},d=l,c=(a("f6dd"),a("2877")),u=Object(c["a"])(d,r,i,!1,null,null,null);t["a"]=u.exports},"41ba":function(e,t,a){},"6cb2":function(e,t,a){},"74b4":function(e,t,a){},8218:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-overlay",{attrs:{show:e.isLoading}},[a("form",{on:{submit:function(t){return t.preventDefault(),e.createLine()}}},[a("form",{staticClass:"mb-3"},[a("div",{staticClass:"form-group "},[a("label",[e._v("Libelle "),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.libelle,expression:"form.libelle"}],staticClass:"form-control",attrs:{required:"",type:"text"},domProps:{value:e.form.libelle},on:{input:function(t){t.target.composing||e.$set(e.form,"libelle",t.target.value)}}})]),a("div",{staticClass:"row "},[a("div",{staticClass:"form-group col-6"},[a("label",[e._v("Debut "),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.debut,expression:"form.debut"}],staticClass:"form-control",attrs:{required:"",type:"time"},domProps:{value:e.form.debut},on:{input:function(t){t.target.composing||e.$set(e.form,"debut",t.target.value)}}})]),a("div",{staticClass:"form-group col-6"},[a("label",[e._v("Fin "),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fin,expression:"form.fin"}],staticClass:"form-control",attrs:{required:"",type:"time"},domProps:{value:e.form.fin},on:{input:function(t){t.target.composing||e.$set(e.form,"fin",t.target.value)}}})])]),a("div",{staticClass:"row "},[a("div",{staticClass:"form-group col-4"},[a("label",[e._v("volume horaire minimum "),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.vol_horaire_min,expression:"form.vol_horaire_min"}],staticClass:"form-control",attrs:{required:"",type:"time"},domProps:{value:e.form.vol_horaire_min},on:{input:function(t){t.target.composing||e.$set(e.form,"vol_horaire_min",t.target.value)}}})]),a("div",{staticClass:"form-group col-4"},[a("label",[e._v("nombre de poitagne minimum "),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.nmb_pointage_min,expression:"form.nmb_pointage_min"}],staticClass:"form-control",attrs:{min:"0",required:"",type:"number"},domProps:{value:e.form.nmb_pointage_min},on:{input:function(t){t.target.composing||e.$set(e.form,"nmb_pointage_min",t.target.value)}}})]),a("div",{staticClass:"form-group col-4"},[a("label",[e._v("Tolérance "),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.tolerance,expression:"form.tolerance"}],staticClass:"form-control",attrs:{required:"",type:"number"},domProps:{value:e.form.tolerance},on:{input:function(t){t.target.composing||e.$set(e.form,"tolerance",t.target.value)}}})])])]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-floppy-disk"}),e._v(" Créer ")])])])},i=[],s=a("b8bb"),o=a("9dbc"),n=a("4a7a"),l=a.n(n),d={name:"CreateHoraires",components:{VSelect:l.a,CustomSelect:s["a"],Files:o["a"]},props:["gridApi","modalFormId","tachesData","parentKey","parentId"],data:function(){return{errors:[],isLoading:!1,form:{id:"",libelle:"",debut:"",fin:"",tolerance:"",type:"",tache_id:"",extra_attributes:"",created_at:"",updated_at:"",deleted_at:"",identifiants_sadge:"",creat_by:"",parent:"",parentId:""}}},methods:{createLine:function(){var e=this;this.form.parentId=this.parentId,this.form.poste_id=this.parentId,this.isLoading=!0,this.axios.post("/api/horaires",this.form).then((function(t){e.isLoading=!1,e.resetForm(),e.gridApi.applyServerSideTransaction({add:[t.data]}),e.gridApi.refreshServerSide(),e.$bvModal.hide(e.modalFormId),e.$toast.success("Operation effectuer avec succes"),e.$emit("close"),console.log(t.data)})).catch((function(t){e.errors=t.response.data.errors,e.isLoading=!1,e.$toast.error("Erreur survenue lors de l'enregistrement")}))},resetForm:function(){this.form={id:"",libelle:"",debut:"",fin:"",tolerance:"",type:"",tache_id:"",extra_attributes:"",created_at:"",updated_at:"",deleted_at:"",identifiants_sadge:"",creat_by:"",parent:"",parentId:""}}}},c=d,u=a("2877"),f=Object(u["a"])(c,r,i,!1,null,null,null);t["a"]=f.exports},"8cf4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("b-modal",{attrs:{id:e.formId,size:e.formWidth},scopedSlots:e._u([{key:"modal-title",fn:function(){return["Update"==e.formState?a("div",[e._v("Update Horaires #"+e._s(e.formData.id))]):e._e(),"Create"==e.formState?a("div",[e._v("Create Horaires")]):e._e()]},proxy:!0},{key:"modal-footer",fn:function(){return[a("div")]},proxy:!0}])},["Update"==e.formState?a("EditHoraires",{key:e.formKey,attrs:{data:e.formData,gridApi:e.formGridApi,modalFormId:e.formId,tachesData:e.tachesData},on:{close:e.closeForm}}):e._e(),"Create"==e.formState?a("CreateHoraires",{key:e.formKey,attrs:{gridApi:e.formGridApi,modalFormId:e.formId,parentId:e.parentId,parentKey:e.parentKey,tachesData:e.tachesData},on:{close:e.closeForm}}):e._e()],1),a("div",{staticClass:"col-sm-12"},[a("AgGridTable",{key:e.tableKey,attrs:{cacheBlockSize:e.cacheBlockSize,columnDefs:e.columnDefs,extrasData:e.extrasData,maxBlocksInCache:e.maxBlocksInCache,pagination:e.pagination,paginationPageSize:e.paginationPageSize,rowData:e.rowData,rowModelType:e.rowModelType,url:e.url,className:"ag-theme-alpine",domLayout:"autoHeight",rowSelection:"multiple"},on:{gridReady:e.onGridReady,newData:e.newData},scopedSlots:e._u([{key:"header_buttons",fn:function(){return[e.routeData.meta.hideCreate?e._e():a("div",{staticClass:"btn btn-primary",on:{click:e.openCreate}},[a("i",{staticClass:"fa fa-plus"}),e._v(" Nouveau ")])]},proxy:!0}])})],1)],1)},i=[],s=a("1fdb"),o=a("bad1"),n=a("8218"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-overlay",{attrs:{show:e.isLoading}},[a("form",{on:{submit:function(t){return t.preventDefault(),e.EditLine()}}},[a("form",{staticClass:"mb-3"},[a("div",{staticClass:"form-group "},[a("label",[e._v("Libelle "),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.libelle,expression:"form.libelle"}],staticClass:"form-control",attrs:{required:"",type:"text"},domProps:{value:e.form.libelle},on:{input:function(t){t.target.composing||e.$set(e.form,"libelle",t.target.value)}}})]),a("div",{staticClass:"row "},[a("div",{staticClass:"form-group col-6"},[a("label",[e._v("Debut "),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.debut,expression:"form.debut"}],staticClass:"form-control",attrs:{required:"",type:"time"},domProps:{value:e.form.debut},on:{input:function(t){t.target.composing||e.$set(e.form,"debut",t.target.value)}}})]),a("div",{staticClass:"form-group col-6"},[a("label",[e._v("Fin "),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fin,expression:"form.fin"}],staticClass:"form-control",attrs:{required:"",type:"time"},domProps:{value:e.form.fin},on:{input:function(t){t.target.composing||e.$set(e.form,"fin",t.target.value)}}})])]),a("div",{staticClass:"row "},[a("div",{staticClass:"form-group col-4"},[a("label",[e._v("volume horaire minimum "),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.vol_horaire_min,expression:"form.vol_horaire_min"}],staticClass:"form-control",attrs:{required:"",type:"time"},domProps:{value:e.form.vol_horaire_min},on:{input:function(t){t.target.composing||e.$set(e.form,"vol_horaire_min",t.target.value)}}})]),a("div",{staticClass:"form-group col-4"},[a("label",[e._v("nombre de poitagne minimum "),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.nmb_pointage_min,expression:"form.nmb_pointage_min"}],staticClass:"form-control",attrs:{required:"",type:"number"},domProps:{value:e.form.nmb_pointage_min},on:{input:function(t){t.target.composing||e.$set(e.form,"nmb_pointage_min",t.target.value)}}})]),a("div",{staticClass:"form-group col-4"},[a("label",[e._v("Tolérance "),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.tolerance,expression:"form.tolerance"}],staticClass:"form-control",attrs:{required:"",type:"number"},domProps:{value:e.form.tolerance},on:{input:function(t){t.target.composing||e.$set(e.form,"tolerance",t.target.value)}}})])])]),a("div",{staticClass:"d-flex justify-content-between"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-floppy-disk"}),e._v(" Mettre à jour ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.DeleteLine()}}},[a("i",{staticClass:"fas fa-close"}),e._v(" Supprimer ")])])])])},d=[],c=a("b8bb"),u=a("9dbc"),f=a("4a7a"),m=a.n(f),p={name:"EditHoraires",components:{VSelect:m.a,CustomSelect:c["a"],Files:u["a"]},props:["data","gridApi","modalFormId","tachesData"],data:function(){return{errors:[],isLoading:!1,form:{id:"",libelle:"",debut:"",fin:"",tolerance:"",type:"",tache_id:"",extra_attributes:"",created_at:"",updated_at:"",deleted_at:"",identifiants_sadge:"",creat_by:"",parent:"",parentId:""}}},mounted:function(){this.form=this.data},methods:{EditLine:function(){var e=this;this.isLoading=!0,this.axios.post("/api/horaires/"+this.form.id+"/update",this.form).then((function(t){e.isLoading=!1,e.gridApi.applyServerSideTransaction({update:[t.data]}),e.$bvModal.hide(e.modalFormId),e.$toast.success("Operation effectuer avec succes"),e.$emit("close"),console.log(t.data)})).catch((function(t){e.errors=t.response.data.errors,e.isLoading=!1,e.$toast.error("Erreur survenue lors de l'enregistrement")}))},DeleteLine:function(){var e=this;this.isLoading=!0,this.axios.post("/api/horaires/"+this.form.id+"/delete").then((function(t){e.isLoading=!1,e.gridApi.applyServerSideTransaction({remove:[e.form]}),e.gridApi.refreshServerSide(),e.$bvModal.hide(e.modalFormId),e.$toast.success("Operation effectuer avec succes"),e.$emit("close"),console.log(t.data)})).catch((function(t){console.log(t.response.data),e.isLoading=!1,e.$toast.error("Erreur survenue lors de la suppression")}))}}},h=p,g=a("2877"),v=Object(g["a"])(h,l,d,!1,null,null,null),b=v.exports,_=a("47b7"),C=a("27c5"),y={name:"HorairesView",components:{DataTable:s["a"],AgGridTable:o["a"],CreateHoraires:n["a"],EditHoraires:b,DataModal:_["a"],AgGridBtnClicked:C["a"]},props:["parentId","parentKey"],data:function(){return{formId:"horaires",formState:"",formData:{},formWidth:"lg",formGridApi:{},formKey:0,tableKey:0,url:"http://127.0.0.1:8000/api/horaires-Aggrid1",table:"horaires",tachesData:[],requette:1,columnDefs:null,rowData:null,gridApi:null,columnApi:null,rowModelType:null,pagination:!0,paginationPageSize:100,cacheBlockSize:10,maxBlocksInCache:1,horaireSelectioner:0}},computed:{routeData:function(){var e={meta:{}};if(window.router)try{e=window.router}catch(t){}return e},taille:function(){var e="col-sm-12";return this.filtre&&(e="col-sm-9"),e},extrasData:function(){var e={baseFilter:{}};return e["baseFilter"]["poste_id"]={values:[this.parentId],filterType:"set"},e}},watch:{routeData:{handler:function(e,t){this.gridApi.setFilterModel(null),this.gridApi.refreshServerSide()},deep:!0}},created:function(){this.url=this.axios.defaults.baseURL+"/api/horaires-Aggrid1",this.formId=this.table+"_"+Date.now(),this.rowBuffer=0,this.rowModelType="serverSide",this.cacheBlockSize=50,this.maxBlocksInCache=2},beforeMount:function(){var e=this;this.columnDefs=[{field:"id",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},hide:!0,headerName:"#Id"},{field:null,headerName:"",suppressCellSelection:!0,minWidth:80,maxWidth:80,pinned:"left",cellRendererSelector:function(t){return{component:"AgGridBtnClicked",params:{clicked:function(a){e.showForm("Update",a,t.api)},render:'<div class="btn btn-primary" style="width:100%;height:100%;color:#fff;border-radius:5px;text-align:center;cursor:pointer">  <i class="fa-solid fa-pen-to-square "></i></div>'}}}},{field:"libelle",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"libelle",maxWidth:100,cellStyle:function(t){return t.data.id===e.horaireSelectioner?{color:"#fff",backgroundColor:"green"}:null},cellRendererSelector:function(t){return{component:"AgGridBtnClicked",params:{clicked:function(t){e.selectHoraire(t)},render:'<div class="" style="width:100%;height:100%;cursor:pointer">'.concat(t.data.libelle,"</div>")}}}},{field:"debut",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"debut",maxWidth:120},{field:"fin",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"fin",maxWidth:120},{field:"nmb_pointage_min",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"Min P",maxWidth:120},{field:"vol_horaire_min",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"Vol H",maxWidth:120}]},mounted:function(){this.requette,this.sendFormData()},methods:{closeForm:function(){try{this.gridApi.refreshServerSide()}catch(e){}},openCreate:function(){this.showForm("Create",{},this.gridApi)},showForm:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"lg";this.formKey++,this.formWidth=r,this.formState=e,this.formData=t,this.formGridApi=a,this.$bvModal.show(this.formId)},onGridReady:function(e){console.log("on demarre",e),this.gridApi=e.api,this.columnApi=e.columnApi,this.isLoading=!1},newData:function(e){this.$emit("newData1",e.rowData)},gettaches:function(){var e=this;this.axios.get("/api/taches").then((function(t){e.requette--,e.requette,e.tachesData=t.data})).catch((function(t){console.log(t.response.data),e.$toast.error("Erreur survenue lors de la récuperation")}))},selectHoraire:function(e){this.horaireSelectioner=e.id,this.gridApi.redrawRows()},sendFormData:function(){this.$emit("getFormData",this.formData)}}},x=y,S=Object(g["a"])(x,r,i,!1,null,null,null);t["default"]=S.exports},"91c5":function(e,t,a){"use strict";a("0a1a")},9403:function(e,t,a){"use strict";a("b0bf")},a434:function(e,t,a){"use strict";var r=a("23e7"),i=a("7b0b"),s=a("23cb"),o=a("5926"),n=a("07fa"),l=a("3a34"),d=a("3511"),c=a("65f0"),u=a("8418"),f=a("083a"),m=a("1dde"),p=m("splice"),h=Math.max,g=Math.min;r({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var a,r,m,p,v,b,_=i(this),C=n(_),y=s(e,C),x=arguments.length;for(0===x?a=r=0:1===x?(a=0,r=C-y):(a=x-2,r=g(h(o(t),0),C-y)),d(C+a-r),m=c(_,r),p=0;p<r;p++)v=y+p,v in _&&u(m,p,_[v]);if(m.length=r,a<r){for(p=y;p<C-r;p++)v=p+r,b=p+a,v in _?_[b]=_[v]:f(_,b);for(p=C;p>C-r+a;p--)f(_,p-1)}else if(a>r)for(p=C-r;p>y;p--)v=p+r-1,b=p+a-1,v in _?_[b]=_[v]:f(_,b);for(p=0;p<a;p++)_[p+y]=arguments[p+2];return l(_,C-r+a),m}})},b0bf:function(e,t,a){},c14d:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-overlay",{attrs:{show:e.isLoading}},[a("b-modal",{attrs:{id:e.formId,size:e.formWidth},scopedSlots:e._u([{key:"modal-title",fn:function(){return["Create"==e.formState?a("div",[e._v("Ajouter des pointeuses")]):e._e()]},proxy:!0},{key:"modal-footer",fn:function(){return[a("div"),"Create"==e.formState?a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.finishAddPointeuse()}}},[a("i",{staticClass:"fas fa-floppy-disk"}),e._v(" Valider ")]):e._e()]},proxy:!0}])},["Create"==e.formState?a("div",[a("AgGridSearch",{attrs:{columnDefs:e.columnDefs,filterFields:["code","libelle"],url:e.url},on:{destruction:e.finishAddPointeuse}})],1):e._e()]),a("form",{on:{submit:function(t){return t.preventDefault(),e.EditLine()}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"form-group col-sm"},[e.form.typespostes?[a("label",[e._v("type ")]),a("CustomSelect1",{key:e.form.typespostes,attrs:{columnDefs:["id","libelle"],disable:1!=e.form.typespostes.canUpdate,oldValue:e.form.typespostes,renderCallBack:function(e){return""+e.libelle},selectCallBack:function(t){return e.form.typesposte_id=t.id},url:e.axios.defaults.baseURL+"/api/typespostes-Aggrid1","filter-key":"","filter-value":""}}),e.errors.typesposte_id?a("div",{staticClass:"invalid-feedback"},[e._l(e.errors.typesposte_id,(function(t){return[e._v(" "+e._s(t[0]))]}))],2):e._e()]:e._e()],2),a("div",{staticClass:"form-group  col-sm"},[a("label",[e._v("libelle ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.libelle,expression:"form.libelle"}],class:e.errors.libelle?"form-control is-invalid":"form-control",attrs:{disabled:1!=e.form.typespostes.canUpdate,type:"text"},domProps:{value:e.form.libelle},on:{input:function(t){t.target.composing||e.$set(e.form,"libelle",t.target.value)}}}),e.errors.libelle?a("div",{staticClass:"invalid-feedback"},[e._l(e.errors.libelle,(function(t){return[e._v(" "+e._s(t[0]))]}))],2):e._e()]),a("div",{staticClass:"form-group  col-sm"},[a("label",[e._v("Nb jour /Semaine ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.jours,expression:"form.jours"}],class:e.errors.jours?"form-control is-invalid":"form-control",attrs:{disabled:1!=e.form.typespostes.canUpdate,type:"text"},domProps:{value:e.form.jours},on:{input:function(t){t.target.composing||e.$set(e.form,"jours",t.target.value)}}}),e.errors.jours?a("div",{staticClass:"invalid-feedback"},[e._l(e.errors.jours,(function(t){return[e._v(" "+e._s(t[0]))]}))],2):e._e()]),a("div",{staticClass:"form-group  col-sm"},[a("label",[e._v("Nbrs agents J ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.maxjours,expression:"form.maxjours"}],class:e.errors.maxjours?"form-control is-invalid":"form-control",attrs:{disabled:1!=e.form.typespostes.canUpdate,type:"text"},domProps:{value:e.form.maxjours},on:{input:function(t){t.target.composing||e.$set(e.form,"maxjours",t.target.value)}}}),e.errors.maxjours?a("div",{staticClass:"invalid-feedback"},[e._l(e.errors.maxjours,(function(t){return[e._v(" "+e._s(t[0]))]}))],2):e._e()]),a("div",{staticClass:"form-group  col-sm"},[a("label",[e._v("Nbrs agents N ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.maxnuits,expression:"form.maxnuits"}],class:e.errors.maxnuits?"form-control is-invalid":"form-control",attrs:{disabled:1!=e.form.typespostes.canUpdate,type:"text"},domProps:{value:e.form.maxnuits},on:{input:function(t){t.target.composing||e.$set(e.form,"maxnuits",t.target.value)}}}),e.errors.maxnuits?a("div",{staticClass:"invalid-feedback"},[e._l(e.errors.maxnuits,(function(t){return[e._v(" "+e._s(t[0]))]}))],2):e._e()])]),a("div",{staticClass:"row"},[a("div",{staticClass:"form-group  col-sm"},[a("label",[e._v("sites ")]),a("CustomSelect1",{key:e.form.sites,attrs:{columnDefs:e.siteCustomSelectColumns,disable:1!=e.form.typespostes.canUpdate,oldValue:{sites:e.form.sites,clients:e.form.clients},renderCallBack:function(e){return e.sites.libelle+" / "+e.clients.libelle+"  "},selectCallBack:function(t){return e.form.site_id=t.id},url:e.axios.defaults.baseURL+"/api/sites-Aggrid1","filter-key":"","filter-value":""}}),e.errors.site_id?a("div",{staticClass:"invalid-feedback"},[e._l(e.errors.site_id,(function(t){return[e._v(" "+e._s(t[0]))]}))],2):e._e()],1),a("div",{staticClass:"form-group  col-sm"},[a("label",[e._v("Clients ")]),a("CustomSelect",{key:e.form.clients,attrs:{columnDefs:["libelle","client.Selectlabel"],disable:!0,oldValue:e.form.clients,renderCallBack:function(e){return""+e.libelle},selectCallBack:function(t){return e.form.client_id=t.id},url:e.axios.defaults.baseURL+"/api/clients-Aggrid1","filter-key":"","filter-value":""}}),e.errors.client_id?a("div",{staticClass:"invalid-feedback"},[e._l(e.errors.client_id,(function(t){return[e._v(" "+e._s(t[0]))]}))],2):e._e()],1),a("div",{staticClass:"form-group  col-sm"},[a("label",[e._v("Zones ")]),a("CustomSelect",{key:e.form.zones,attrs:{columnDefs:["libelle","zone.Selectlabel"],disable:!0,oldValue:e.form.zones,renderCallBack:function(e){return""+e.libelle},selectCallBack:function(t){return e.form.zone_id=t.id},url:e.axios.defaults.baseURL+"/api/zones-Aggrid1","filter-key":"","filter-value":""}}),e.errors.zone_id?a("div",{staticClass:"invalid-feedback"},[e._l(e.errors.client_id,(function(t){return[e._v(" "+e._s(t[0]))]}))],2):e._e()],1)]),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12",staticStyle:{display:"none"}},[a("h3",[e._v("Listes des horaire")]),a("HorairesView",{attrs:{parentId:e.form.id,parentKey:"poste"},on:{getFormData:e.receiveFormData,newData1:e.newData}})],1),a("div",{staticClass:"col-sm-12"},[a("h3",[e._v("Listes des agents affectées en fonction de la plage horaire")]),a("HoraireagentsView",{ref:"horaireagentsview",attrs:{horaireId:e.actualHoraire,horaires:e.horaires,parent:e.form,typespostes:e.$routeData.meta.postesimporter},on:{newData:e.newDataInHoraires}})],1)])]),e.$routeData.meta.postesimporter?e._e():a("div",{staticClass:"d-flex justify-content-between"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-floppy-disk"}),e._v(" Mettre à jour ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.DeleteLine()}}},[a("i",{staticClass:"fas fa-close"}),e._v(" Supprimer ")])])])],1)},i=[],s=(a("99af"),a("4de4"),a("caad"),a("a15b"),a("d81d"),a("14d9"),a("b64b"),a("d3b7"),a("2532"),a("1cdd")),o=a("b8bb"),n=a("9dbc"),l=a("4a7a"),d=a.n(l),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("b-modal",{attrs:{id:e.formId,size:e.formWidth},scopedSlots:e._u([{key:"modal-title",fn:function(){return["Update"==e.formState?a("div",[e._v(" Update Postesagents #"+e._s(e.formData.id)+" ")]):e._e(),"Create"==e.formState?a("div",[e._v("Create Postesagents")]):e._e()]},proxy:!0},{key:"modal-footer",fn:function(){return["Create"==e.formState?a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.finishAddUser()}}},[a("i",{staticClass:"fas fa-floppy-disk"}),e._v(" Valider ")]):e._e()]},proxy:!0}])},["Update"==e.formState?a("EditPostesagents",{key:e.formKey,attrs:{data:e.formData,faction:e.faction,gridApi:e.formGridApi,modalFormId:e.formId,parentId:e.parentId,postesData:e.postesData,usersData:e.usersData},on:{close:e.closeForm}}):e._e(),"Create"==e.formState?a("AgGridSearch",{attrs:{columnDefs:e.addListing.columnDefs,extrasData:e.addListing.extrasData,filterFields:["nom","prenom","matricule"],url:e.addListing.url,"filter-key":"type","filter-value":"2"},on:{destruction:e.finishAddUser}}):e._e()],1),a("div",{staticClass:"col-sm-12"},[a("AgGridTable",{key:e.tableKey,attrs:{cacheBlockSize:e.cacheBlockSize,columnDefs:e.columnDefs,extrasData:e.extrasData,maxBlocksInCache:e.maxBlocksInCache,pagination:e.pagination,paginationPageSize:e.paginationPageSize,rowData:e.rowData,rowModelType:e.rowModelType,showExport:!1,url:e.url,className:"ag-theme-alpine",domLayout:"autoHeight",rowSelection:"multiple"},on:{gridReady:e.onGridReady,newData:e.newData},scopedSlots:e._u([{key:"header_buttons",fn:function(){return[e.routeData.meta.hideCreate?e._e():a("div",{staticClass:"btn btn-primary",on:{click:e.openCreate}},[a("i",{staticClass:"fa fa-plus"}),e._v(" Nouveau ")])]},proxy:!0}])})],1)],1)},u=[],f=(a("159b"),a("1fdb")),m=a("bad1"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-overlay",{attrs:{show:e.isLoading}},[a("form",{on:{submit:function(t){return t.preventDefault(),e.createLine()}}},[a("div",{staticClass:"mb-3"},[a("div",{staticClass:"form-group"},[a("label",[e._v("users ")]),a("CustomSelect",{key:e.form.user,attrs:{columnDefs:["nom","prenom","matricule"],oldValue:e.form.user,renderCallBack:function(e){return""+e.Selectlabel},selectCallBack:function(t){return e.form.user_id=t.id},url:e.axios.defaults.baseURL+"/api/users-Aggrid1","filter-key":"","filter-value":""}}),e.errors.user_id?a("div",{staticClass:"invalid-feedback"},[e._l(e.errors.user_id,(function(t){return[e._v(" "+e._s(t[0]))]}))],2):e._e()],1)]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-floppy-disk"}),e._v(" Créer ")])])])},h=[],g={name:"CreatePostesagents",components:{VSelect:d.a,CustomSelect:o["a"],Files:n["a"]},props:["gridApi","modalFormId","postesData","usersData","parentId","faction"],data:function(){return{errors:[],isLoading:!1,form:{id:"",poste_id:"",user_id:"",faction:"",created_at:"",updated_at:"",extra_attributes:"",deleted_at:""}}},mounted:function(){this.form.faction=this.faction,this.form.poste_id=this.parentId},methods:{createLine:function(){var e=this;this.isLoading=!0,this.axios.post("/api/postesagents",this.form).then((function(t){e.isLoading=!1,e.resetForm(),e.gridApi.applyServerSideTransaction({add:[t.data]}),e.gridApi.refreshServerSide(),e.$bvModal.hide(e.modalFormId),e.$toast.success("Operation effectuer avec succes"),e.$emit("close"),console.log(t.data)})).catch((function(t){e.errors=t.response.data.errors,e.isLoading=!1,e.$toast.error("Erreur survenue lors de l'enregistrement")}))},resetForm:function(){this.form={id:"",poste_id:"",user_id:"",faction:"",created_at:"",updated_at:"",extra_attributes:"",deleted_at:""}}}},v=g,b=a("2877"),_=Object(b["a"])(v,p,h,!1,null,null,null),C=_.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-overlay",{attrs:{show:e.isLoading}},[a("form",{on:{submit:function(t){return t.preventDefault(),e.EditLine()}}},[a("div",{staticClass:"mb-3"},[a("div",{staticClass:"form-group"},[a("label",[e._v("faction ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.faction,expression:"form.faction"}],class:e.errors.faction?"form-control is-invalid":"form-control",attrs:{type:"text"},domProps:{value:e.form.faction},on:{input:function(t){t.target.composing||e.$set(e.form,"faction",t.target.value)}}}),e.errors.faction?a("div",{staticClass:"invalid-feedback"},[e._l(e.errors.faction,(function(t){return[e._v(" "+e._s(t[0]))]}))],2):e._e()]),a("div",{staticClass:"form-group"},[a("label",[e._v("postes ")]),a("CustomSelect",{key:e.form.poste,attrs:{columnDefs:["libelle"],oldValue:e.form.poste,renderCallBack:function(e){return""+e.Selectlabel},selectCallBack:function(t){return e.form.poste_id=t.id},url:e.axios.defaults.baseURL+"/api/postes-Aggrid1","filter-key":"","filter-value":""}}),e.errors.poste_id?a("div",{staticClass:"invalid-feedback"},[e._l(e.errors.poste_id,(function(t){return[e._v(" "+e._s(t[0]))]}))],2):e._e()],1),a("div",{staticClass:"form-group"},[a("label",[e._v("users ")]),a("CustomSelect",{key:e.form.user,attrs:{columnDefs:["nom","prenom","matricule"],oldValue:e.form.user,renderCallBack:function(e){return""+e.Selectlabel},selectCallBack:function(t){return e.form.user_id=t.id},url:e.axios.defaults.baseURL+"/api/users-Aggrid1","filter-key":"","filter-value":""}}),e.errors.user_id?a("div",{staticClass:"invalid-feedback"},[e._l(e.errors.user_id,(function(t){return[e._v(" "+e._s(t[0]))]}))],2):e._e()],1)]),a("div",{staticClass:"d-flex justify-content-between"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-floppy-disk"}),e._v(" Mettre à jour ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.DeleteLine()}}},[a("i",{staticClass:"fas fa-close"}),e._v(" Supprimer ")])])])])},x=[],S={name:"EditPostesagents",components:{VSelect:d.a,CustomSelect:o["a"],Files:n["a"]},props:["data","gridApi","modalFormId","postesData","usersData"],data:function(){return{errors:[],isLoading:!1,form:{id:"",poste_id:"",user_id:"",faction:"",created_at:"",updated_at:"",extra_attributes:"",deleted_at:""}}},mounted:function(){this.form=this.data},methods:{EditLine:function(){var e=this;this.isLoading=!0,this.axios.post("/api/postesagents/"+this.form.id+"/update",this.form).then((function(t){e.isLoading=!1,e.gridApi.applyServerSideTransaction({update:[t.data]}),e.$bvModal.hide(e.modalFormId),e.$toast.success("Operation effectuer avec succes"),e.$emit("close"),console.log(t.data)})).catch((function(t){e.errors=t.response.data.errors,e.isLoading=!1,e.$toast.error("Erreur survenue lors de l'enregistrement")}))},DeleteLine:function(){var e=this;this.isLoading=!0,this.axios.post("/api/postesagents/"+this.form.id+"/delete").then((function(t){e.isLoading=!1,e.gridApi.applyServerSideTransaction({remove:[e.form]}),e.gridApi.refreshServerSide(),e.$bvModal.hide(e.modalFormId),e.$toast.success("Operation effectuer avec succes"),e.$emit("close"),console.log(t.data)})).catch((function(t){console.log(t.response.data),e.isLoading=!1,e.$toast.error("Erreur survenue lors de la suppression")}))}}},D=S,k=Object(b["a"])(D,y,x,!1,null,null,null),w=k.exports,A=a("47b7"),L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-overlay",{attrs:{show:e.isLoading}},[a("div",{staticClass:"parentListingsTraitements"},[e.isCheck?a("span",{staticClass:"fakeCheckBox cocher ",on:{click:function(t){return t.preventDefault(),e.addAbscence()}}}):a("span",{staticClass:"fakeCheckBox ",on:{click:function(t){return t.preventDefault(),e.addPresence()}}})])])],1)},F=[],$=a("99d2"),I={name:"DaysTraitements",components:{AgGridSearch:$["a"],VSelect:d.a},props:[],data:function(){return{status:"non",isLoading:!1,etats:!1}},computed:{isCheck:function(){return 1==this.etats}},watch:{},created:function(){var e=this.params.day.toLowerCase(),t=this.params.data;this.etats=t[e]},mounted:function(){this.params.day.toLowerCase(),this.params.data},methods:{addPresence:function(){var e=this,t=this.params.data,a=this.params.day.toLowerCase();this.isLoading=!0;var r={};r[a]=1,this.axios.post("/api/postesagents/"+t.id+"/update",r).then((function(t){e.isLoading=!1,e.etats=t.data[a]})).catch((function(t){e.isLoading=!1}))},addAbscence:function(){var e=this,t=this.params.data,a=this.params.day.toLowerCase();this.isLoading=!0;var r={};r[a]=2,this.axios.post("/api/postesagents/"+t.id+"/update",r).then((function(t){e.isLoading=!1,e.etats=t.data[a]})).catch((function(t){e.isLoading=!1}))}}},P=I,T=(a("1215"),Object(b["a"])(P,L,F,!1,null,"47b6bcb4",null)),B=T.exports,E=a("27c5"),N={name:"PostesagentsView",components:{DataTable:f["a"],AgGridTable:m["a"],CreatePostesagents:C,EditPostesagents:w,DataModal:A["a"],AgGridSearch:$["a"],AgGridBtnClicked:E["a"],DaysTraitements:B},props:["parent","faction"],data:function(){return{formId:"postesagents",formState:"",formData:{},formWidth:"lg",formGridApi:{},formKey:0,tableKey:0,url:"http://127.0.0.1:8000/api/postesagents-Aggrid1",table:"postesagents",postesData:[],usersData:[],requette:2,columnDefs:null,rowData:null,gridApi:null,columnApi:null,rowModelType:null,pagination:!0,paginationPageSize:100,cacheBlockSize:10,maxBlocksInCache:1,userAdded:0,addListing:{formId:"listings",formState:"",formData:{},formWidth:"lg",formGridApi:{},formKey:0,tableKey:0,url:"http://127.0.0.1:8000/api/listings-Aggrid1",table:"Users",requette:18,columnDefs:null,rowData:null,gridApi:null,columnApi:null,rowModelType:null,pagination:!0,paginationPageSize:100,cacheBlockSize:10,maxBlocksInCache:1,extrasData:{}}}},computed:{routeData:function(){var e={meta:{}};if(window.router)try{e=window.router}catch(t){}return e},taille:function(){var e="col-sm-12";return this.filtre&&(e="col-sm-9"),e},parentId:function(){var e=0;return e=this.parent.id,e},extrasData:function(){var e={},t={};return t["faction"]={values:[this.faction],filterType:"set"},t["poste_id"]={values:[this.parentId],filterType:"set"},e["baseFilter"]=t,e},days:function(){return["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"]}},watch:{routeData:{handler:function(e,t){this.gridApi.setFilterModel(null),this.gridApi.refreshServerSide()},deep:!0}},created:function(){var e=this;this.url=this.axios.defaults.baseURL+"/api/postesagents-Aggrid1",this.formId=this.table+"_"+Date.now(),this.rowBuffer=0,this.rowModelType="serverSide",this.cacheBlockSize=50,this.maxBlocksInCache=2,this.addListing.url=this.axios.defaults.baseURL+"/api/users-Aggrid1",this.addListing.rowBuffer=0,this.addListing.rowModelType="serverSide",this.addListing.columnDefs=[{field:null,width:100,pinned:"left",suppressColumnsToolPanel:!0,sortable:!1,headerName:"",cellRendererSelector:function(t){var a={component:"AgGridBtnClicked",params:{clicked:function(t){e.addUser(t)},render:'<div class="" style="width:100%;height:100%;background:#2885a7;color:#fff;border-radius:5px;text-align:center;cursor:pointer">  <i class="fa fa-plus"></i></div>'}};return a}},{field:"matricule",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"matricule"},{field:"nom",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"nom"},{field:"prenom",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"prenom"},{field:"num_badge",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"num_badge"}],this.addListing.cacheBlockSize=50,this.addListing.maxBlocksInCache=2},beforeMount:function(){var e=this;this.columnDefs=[{field:null,headerName:"",suppressCellSelection:!0,minWidth:80,maxWidth:80,pinned:"left",cellRendererSelector:function(t){return{component:"AgGridBtnClicked",params:{clicked:function(t){e.DeleteLine(t)},render:'<div class="" style="width:100%;height:100%;background:#e31d3b;color:#fff;border-radius:5px;text-align:center;cursor:pointer">  <i class="fa-solid fa-trash-can"></i></div>'}}}},{headerName:" Nom",field:"user.nom",maxWidth:100},{hide:!0,suppressColumnsToolPanel:!0,headerName:"Agent",field:"user_id",valueFormatter:function(e){var t="";try{return e.data["user"]["nom"]}catch(a){}return t},filter:"agSetColumnFilter",filterParams:{suppressAndOrCondition:!0,keyCreator:function(e){return e.value.id},valueFormatter:function(e){return e.value.Selectlabel},values:function(t){t.success(e.usersData)},refreshValuesOnOpen:!0}},{headerName:" Prenom ",field:"user.prenom",maxWidth:100},{hide:!0,suppressColumnsToolPanel:!0,headerName:"user",field:"user_id",valueFormatter:function(e){var t="";try{return e.data["user"]["prenom"]}catch(a){}return t}},{headerName:" Matricule ",field:"user.matricule",maxWidth:100},{hide:!0,suppressColumnsToolPanel:!0,headerName:"user",field:"user_id",valueFormatter:function(e){var t="";try{return e.data["user"]["matricule"]}catch(a){}return t}}],this.days.forEach((function(t){var a={field:t,suppressCellSelection:!0,maxWidth:60,cellRendererSelector:function(e){return{component:"DaysTraitements",params:{day:t}}},headerName:t};e.columnDefs.push(a)}))},mounted:function(){this.requette},methods:{closeForm:function(){try{this.gridApi.refreshServerSide()}catch(e){}},openCreate:function(){this.showForm("Create",{},this.gridApi)},showForm:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"lg";this.formKey++,this.formWidth=r,this.formState=e,this.formData=t,this.formGridApi=a,this.$bvModal.show(this.formId)},onGridReady:function(e){console.log("on demarre",e),this.gridApi=e.api,this.columnApi=e.columnApi,this.isLoading=!1},newData:function(e){this.$emit("newData",e)},getpostes:function(){var e=this;this.axios.get("/api/postes").then((function(t){e.requette--,e.requette,e.postesData=t.data})).catch((function(t){console.log(t.response.data),e.$toast.error("Erreur survenue lors de la récuperation")}))},getusers:function(){var e=this;this.axios.get("/api/users?filter[actif_id]=1&filter[type]=2").then((function(t){e.requette--,e.requette,e.usersData=t.data})).catch((function(t){console.log(t.response.data),e.$toast.error("Erreur survenue lors de la récuperation")}))},addUser:function(e){var t=this;console.log("voici les donnees ===>",e);var a={faction:this.faction,poste_id:this.parentId,user_id:e.id};this.isLoading=!0,this.axios.post("/api/postesagents",a).then((function(e){t.isLoading=!1,t.userAdded++,t.$toast.success("Operation effectuer avec succes"),t.$emit("close"),console.log(e.data)})).catch((function(e){t.errors=e.response.data.errors,t.isLoading=!1,t.$toast.error("Erreur survenue lors de l'enregistrement")}))},finishAddUser:function(){this.userAdded>0&&this.tableKey++,this.userAdded=0,this.$bvModal.hide(this.formId)},DeleteLine:function(e){var t=this;this.isLoading=!0,this.axios.post("/api/postesagents/"+e.id+"/delete").then((function(e){t.isLoading=!1,t.tableKey++,t.$toast.success("Operation effectuer avec succes"),t.$emit("close"),console.log(e.data)})).catch((function(e){console.log(e.response.data),t.isLoading=!1,t.$toast.error("Erreur survenue lors de la suppression")}))},present:function(e,t){var a=this,r={};switch(t){case"lundi":r.lun=!0;break;case"mardi":r.mar=!0;break;case"mercredi":r.mer=!0;break;case"jeudi":r.jeu=!0;break;case"vendredi":r.ven=!0;break;case"samedi":r.sam=!0;break;case"dimanche":r.dim=!0;break}this.isLoading=!0,this.axios.post("/api/postesagents/"+e.id+"/update",r).then((function(e){a.isLoading=!1,a.tableKey++,a.$toast.success("Operation effectuer avec succes"),a.$emit("close")})).catch((function(e){console.log(e.response.data),a.isLoading=!1,a.$toast.error("Erreur survenue lors de la suppression")}))},nonpresent:function(e,t){var a=this;switch(t){case"lundi":e.lun=!1;break;case"mardi":e.mar=!1;break;case"mercredi":e.mer=!1;break;case"jeudi":e.jeu=!1;break;case"vendredi":e.ven=!1;break;case"samedi":e.sam=!1;break;case"dimanche":e.dim=!1;break}console.log("element=>",e),this.isLoading=!0,this.axios.post("/api/postesagents/"+e.id+"/update",e).then((function(e){a.isLoading=!1,a.tableKey++,a.$toast.success("Operation effectuer avec succes"),a.$emit("close")})).catch((function(e){console.log(e.response.data),a.isLoading=!1,a.$toast.error("Erreur survenue lors de la suppression")}))}}},O=N,z=Object(b["a"])(O,c,u,!1,null,null,null),M=z.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("b-modal",{attrs:{id:e.formId,size:e.formWidth},scopedSlots:e._u([{key:"modal-title",fn:function(){return["Update"==e.formState?a("div",[e._v("Update Pointeuses #"+e._s(e.formData.id))]):e._e(),"Create"==e.formState?a("div",[e._v("Create Pointeuses")]):e._e()]},proxy:!0},{key:"modal-footer",fn:function(){return[a("div"),"Create"==e.formState?a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.finishAddPointeuse()}}},[a("i",{staticClass:"fas fa-floppy-disk"}),e._v(" Valider ")]):e._e()]},proxy:!0}])},["Create"==e.formState?a("div",[a("AgGridSearch",{attrs:{columnDefs:e.columnDefs2,filterFields:["code","libelle"],url:e.url2},on:{destruction:e.finishAddPointeuse}})],1):e._e()]),a("div",{staticClass:"col-sm-12"},[a("AgGridTable",{key:e.tableKey,attrs:{cacheBlockSize:e.cacheBlockSize,columnDefs:e.columnDefs,extrasData:e.extrasData,maxBlocksInCache:e.maxBlocksInCache,pagination:e.pagination,paginationPageSize:e.paginationPageSize,rowData:e.rowData,rowModelType:e.rowModelType,url:e.url,className:"ag-theme-alpine",domLayout:"autoHeight",rowSelection:"multiple"},on:{gridReady:e.onGridReady},scopedSlots:e._u([{key:"header_buttons",fn:function(){return[e.$routeData.meta.hideCreate?e._e():a("div",{staticClass:"btn btn-primary",on:{click:e.openCreate}},[a("i",{staticClass:"fa fa-plus"}),e._v(" ajouter une pointeuse ")])]},proxy:!0}])})],1)],1)},G=[],j=a("ade3"),W=(a("a434"),a("d2e9")),K=Object(j["a"])(Object(j["a"])({name:"PointeusesView",components:{DataTable:f["a"],AgGridTable:m["a"],DataModal:A["a"],AgGridSearch:$["a"],AgGridBtnClicked:E["a"],CustomSelect:o["a"],CustomFiltre:W["a"]},props:["parentId"],data:function(){return{formId:"pointeuses",formState:"",formData:{},formWidth:"lg",formGridApi:{},formKey:0,tableKey:0,url:"http://127.0.0.1:8000/api/postespointeuses-Aggrid1",table:"pointeuses",sitesData:[],zonesget:[],zoneselectionner:[],supervirzclientsData:[],requette:2,columnDefs2:null,rowData:null,gridApi:null,columnApi:null,rowModelType:null,pagination:!0,paginationPageSize:100,cacheBlockSize:10,maxBlocksInCache:1,week:null}},computed:{$domaine:function(){var e="supervizr";try{e=window.domaine}catch(t){}return console.log("voila le domaine ==>",e),e},$routeData:function(){var e={meta:{}};try{"undefined"!=typeof window.routeData&&(e=window.routeData)}catch(t){}return e},taille:function(){var e="col-sm-12";return this.filtre&&(e="col-sm-9"),e},columnDefs:function(){var e=this,t=[{field:null,headerName:"",suppressCellSelection:!0,minWidth:80,maxWidth:80,pinned:"left",cellRendererSelector:function(t){return{component:"AgGridBtnClicked",params:{clicked:function(t){e.deletePoste(t)},render:'<div class="" style="width:100%;height:100%;background:#e31d3b;color:#fff;border-radius:5px;text-align:center;cursor:pointer">  <i class="fa-solid fa-trash-can"></i></div>'}}}},{headerName:"libelle",field:"pointeuse.Selectlabel"},{hide:!0,suppressColumnsToolPanel:!0,headerName:"pointeuse",field:"pointeuse_id",valueFormatter:function(e){var t="";try{return e.data["pointeuse"]["Selectlabel"]}catch(a){}return t},filter:"CustomFiltre",filterParams:{url:this.axios.defaults.baseURL+"/api/pointeuses-Aggrid1",columnDefs:[{field:"",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"",cellStyle:{fontSize:"11px"},valueFormatter:function(e){var t="";try{return"".concat(e.data["Selectlabel"])}catch(a){}return t}}],filterFields:["libelle"]}}];return t},extrasData:function(){var e={baseFilter:{}};return e["baseFilter"]["poste_id"]={values:[this.parentId],filterType:"set"},e}},watch:{routeData:{handler:function(e,t){this.gridApi.setFilterModel(null),this.gridApi.refreshServerSide()},deep:!0}},created:function(){this.url=this.axios.defaults.baseURL+"/api/postespointeuses-Aggrid1",this.url2=this.axios.defaults.baseURL+"/api/pointeuses-Aggrid1",this.formId=this.table+"_"+Date.now(),this.rowBuffer=0,this.rowModelType="serverSide",this.cacheBlockSize=50,this.maxBlocksInCache=2},beforeMount:function(){},mounted:function(){this.requette,this.zonesget=this.$routeData.meta.zonesGet}},"beforeMount",(function(){var e=this;this.columnDefs2=[{field:null,width:60,pinned:"left",suppressColumnsToolPanel:!0,sortable:!1,headerName:"",cellRendererSelector:function(t){var a={component:"AgGridBtnClicked",params:{clicked:function(t){e.addPointeuse(t)},render:'<div class="" style="width:100%;height:100%;background:#2885a7;color:#fff;border-radius:5px;text-align:center;cursor:pointer">  <i class="fa fa-plus"></i></div>'}};return a}},{headerName:"zone",field:"site.zone.Selectlabel"},{headerName:"site",field:"site.Selectlabel"},{hide:!0,suppressColumnsToolPanel:!0,headerName:"site",field:"site_id",valueFormatter:function(e){var t="";try{return e.data["site"]["Selectlabel"]}catch(a){}return t},filter:"CustomFiltre",filterParams:{url:this.axios.defaults.baseURL+"/api/sites-Aggrid1",columnDefs:[{field:"",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"",cellStyle:{fontSize:"11px"},valueFormatter:function(e){var t="";try{return"".concat(e.data["Selectlabel"])}catch(a){}return t}}],filterFields:["libelle"]}},{headerName:"client",field:"site.client.Selectlabel"},{field:"code",sortable:!0,maxWidth:120,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"code"},{field:"libelle",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"libelle"}]})),"methods",{closeForm:function(){try{this.gridApi.refreshServerSide()}catch(e){}},openCreate:function(){this.showForm("Create",{},this.gridApi,"xl")},showForm:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"lg";this.formKey++,this.formWidth=r,this.formState=e,this.formData=t,this.formGridApi=a,this.$bvModal.show(this.formId)},onGridReady:function(e){console.log("on demarre",e),this.gridApi=e.api,this.columnApi=e.columnApi,this.isLoading=!1},getsites:function(){var e=this;this.axios.get("/api/sites").then((function(t){e.requette--,e.requette,e.sitesData=t.data})).catch((function(t){console.log(t.response.data),e.$toast.error("Erreur survenue lors de la récuperation")}))},getsupervirzclients:function(){var e=this;this.axios.get("/api/supervirzclients").then((function(t){e.requette--,e.requette,e.supervirzclientsData=t.data})).catch((function(t){console.log(t.response.data),e.$toast.error("Erreur survenue lors de la récuperation")}))},zoneselect:function(e){if(this.zoneselectionner.includes(e)){var t=this.zoneselectionner.indexOf(e);-1!==t&&this.zoneselectionner.splice(t,1)}else this.zoneselectionner.push(e);this.extrasData1.zoneselectionner=this.zoneselectionner},finishAddPointeuse:function(){this.posteSelect.length!=this.lastPosteSelectCount&&(this.lastPosteSelectCount=this.posteSelect.length,this.tableKey++),this.$bvModal.hide(this.formId)},addPointeuse:function(e){var t=this;this.donne.poste_id=this.form.id,this.donne.pointeuse_id=e.Selectvalue,console.log("data.Selectvalue",this.donne),this.isLoading=!0,this.axios.post("/api/postespointeuses",this.donne).then((function(e){t.isLoading=!1,t.posteSelect.push(e.data),t.$toast.success("Operation effectuer avec succes"),console.log(e.data)})).catch((function(e){t.errors=e.response.data.errors,t.isLoading=!1,t.$toast.error("Erreur survenue lors de l'enregistrement")}))},deletePoste:function(e){var t=this,a=e.id;console.log("data=>",a),this.isLoading=!0,this.axios.post("/api/postespointeuses/"+a+"/delete").then((function(e){t.isLoading=!1,t.gridApi.applyServerSideTransaction({remove:[t.form]}),t.gridApi.refreshServerSide(),t.$bvModal.hide(t.modalFormId),t.$toast.success("Operation effectuer avec succes"),t.tableKey++,console.log(e.data)})).catch((function(e){console.log(e.response.data),t.isLoading=!1,t.$toast.error("Erreur survenue lors de la suppression")}))}}),R=K,U=Object(b["a"])(R,H,G,!1,null,null,null),V=U.exports,q=a("8cf4"),J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("b-modal",{attrs:{id:e.formId,size:e.formWidth},scopedSlots:e._u([{key:"modal-title",fn:function(){return["Update"==e.formState?a("div",[e._v(" Update Horaireagents #"+e._s(e.formData.id)+" ")]):e._e(),"Create"==e.formState?a("div",[e._v("Create Horaireagents")]):e._e(),"CreateHoraire"==e.formState?a("div",[e._v("Create Horaire")]):e._e()]},proxy:!0},{key:"modal-footer",fn:function(){return["Create"==e.formState?a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.finishAddUser()}}},[a("i",{staticClass:"fas fa-floppy-disk"}),e._v(" Valider ")]):e._e()]},proxy:!0}])},["Update"==e.formState?a("EditHoraireagents",{key:e.formKey,attrs:{HorairesData:e.HorairesData,data:e.formData,faction:e.faction,gridApi:e.formGridApi,modalFormId:e.formId,parentId:e.parentId,usersData:e.usersData},on:{close:e.closeForm}}):e._e(),"CreateHoraire"==e.formState?a("CreateHoraires",{key:e.formKey,attrs:{gridApi:e.formGridApi,modalFormId:e.formId,parentId:e.parentId},on:{close:e.closeForm}}):e._e(),"Create"==e.formState?a("AgGridSearch",{attrs:{columnDefs:e.addListing.columnDefs,extrasData:e.addListing.extrasData,filterFields:["nom","prenom","matricule"],paginationPageSize:10,url:e.addListing.url},on:{destruction:e.finishAddUser}}):e._e()],1),a("div",{staticClass:"col-sm-12",attrs:{id:"titulaires"}},[a("AgGridTable",{key:e.tableKey,attrs:{cacheBlockSize:e.cacheBlockSize,columnDefs:e.columnDefs,extrasData:e.extrasData,maxBlocksInCache:e.maxBlocksInCache,pagination:e.pagination,paginationPageSize:e.paginationPageSize,rowData:e.rowData,rowModelType:e.rowModelType,showExport:!1,sideBar:{},url:e.url,className:"ag-theme-alpine",domLayout:"autoHeight",rowSelection:"multiple"},on:{gridReady:e.onGridReady,newData:e.newData},scopedSlots:e._u([{key:"header_buttons",fn:function(){return[0!=e.horaireId?a("div",{staticClass:"btn btn-primary",on:{click:e.openCreate}},[a("i",{staticClass:"fa fa-plus"}),e._v(" Ajouter un agent ")]):e._e(),e._l(e.horaires,(function(t){return a("div",{staticClass:"btn",style:e.horaireId==t.id?"border-color:green":"",on:{click:function(a){return e.selectHoraire(t.id)}}},[a("i",{staticClass:"fa-solid fa-check-double",style:e.horaireId==t.id?"color:green":""}),e._v(" "+e._s(t.libelle)+" ( "+e._s(t.debut)+" - "+e._s(t.fin)+" ) ")])})),0!=e.horaireId?a("div",{staticClass:"btn btn-primary",on:{click:e.openCreateHoraire}},[a("i",{staticClass:"fa fa-plus"}),e._v(" Ajouter une horaire ")]):e._e()]},proxy:!0}])})],1)],1)},Q=[],Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-overlay",{attrs:{show:e.isLoading}},[a("form",{on:{submit:function(t){return t.preventDefault(),e.createLine()}}},[a("div",{staticClass:"mb-3"},[a("div",{staticClass:"form-group"},[a("label",[e._v("users ")]),a("CustomSelect",{key:e.form.user,attrs:{columnDefs:["nom","prenom","matricule"],oldValue:e.form.user,renderCallBack:function(e){return""+e.Selectlabel},selectCallBack:function(t){return e.form.user_id=t.id},url:e.axios.defaults.baseURL+"/api/users-Aggrid1","filter-key":"","filter-value":""}}),e.errors.user_id?a("div",{staticClass:"invalid-feedback"},[e._l(e.errors.user_id,(function(t){return[e._v(" "+e._s(t[0]))]}))],2):e._e()],1)]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-floppy-disk"}),e._v(" Créer ")])])])},X=[],Y={name:"CreateHoraireagents",components:{VSelect:d.a,CustomSelect:o["a"],Files:n["a"]},props:["gridApi","modalFormId","HorairesData","usersData","parentId","faction"],data:function(){return{errors:[],isLoading:!1,form:{id:"",poste_id:"",user_id:"",faction:"",created_at:"",updated_at:"",extra_attributes:"",deleted_at:""}}},mounted:function(){this.form.faction=this.faction,this.form.poste_id=this.parentId},methods:{createLine:function(){var e=this;this.isLoading=!0,this.axios.post("/api/Horaireagents",this.form).then((function(t){e.isLoading=!1,e.resetForm(),e.gridApi.applyServerSideTransaction({add:[t.data]}),e.gridApi.refreshServerSide(),e.$bvModal.hide(e.modalFormId),e.$toast.success("Operation effectuer avec succes"),e.$emit("close"),console.log(t.data)})).catch((function(t){e.errors=t.response.data.errors,e.isLoading=!1,e.$toast.error("Erreur survenue lors de l'enregistrement")}))},resetForm:function(){this.form={id:"",poste_id:"",user_id:"",faction:"",created_at:"",updated_at:"",extra_attributes:"",deleted_at:""}}}},ee=Y,te=Object(b["a"])(ee,Z,X,!1,null,null,null),ae=te.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-overlay",{attrs:{show:e.isLoading}},[a("form",{on:{submit:function(t){return t.preventDefault(),e.EditLine()}}},[a("div",{staticClass:"mb-3"},[a("div",{staticClass:"form-group"},[a("label",[e._v("faction ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.faction,expression:"form.faction"}],class:e.errors.faction?"form-control is-invalid":"form-control",attrs:{type:"text"},domProps:{value:e.form.faction},on:{input:function(t){t.target.composing||e.$set(e.form,"faction",t.target.value)}}}),e.errors.faction?a("div",{staticClass:"invalid-feedback"},[e._l(e.errors.faction,(function(t){return[e._v(" "+e._s(t[0]))]}))],2):e._e()]),a("div",{staticClass:"form-group"},[a("label",[e._v("Horaires ")]),a("CustomSelect",{key:e.form.Horaire,attrs:{columnDefs:["libelle"],oldValue:e.form.Horaire,renderCallBack:function(e){return""+e.Selectlabel},selectCallBack:function(t){return e.form.Horaire_id=t.id},url:e.axios.defaults.baseURL+"/api/Horaires-Aggrid1","filter-key":"","filter-value":""}}),e.errors.poste_id?a("div",{staticClass:"invalid-feedback"},[e._l(e.errors.poste_id,(function(t){return[e._v(" "+e._s(t[0]))]}))],2):e._e()],1),a("div",{staticClass:"form-group"},[a("label",[e._v("users ")]),a("CustomSelect",{key:e.form.user,attrs:{columnDefs:["nom","prenom","matricule"],oldValue:e.form.user,renderCallBack:function(e){return""+e.Selectlabel},selectCallBack:function(t){return e.form.user_id=t.id},url:e.axios.defaults.baseURL+"/api/users-Aggrid1","filter-key":"","filter-value":""}}),e.errors.user_id?a("div",{staticClass:"invalid-feedback"},[e._l(e.errors.user_id,(function(t){return[e._v(" "+e._s(t[0]))]}))],2):e._e()],1)]),a("div",{staticClass:"d-flex justify-content-between"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-floppy-disk"}),e._v(" Mettre à jour ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.DeleteLine()}}},[a("i",{staticClass:"fas fa-close"}),e._v(" Supprimer ")])])])])},ie=[],se={name:"EditHoraireagents",components:{VSelect:d.a,CustomSelect:o["a"],Files:n["a"]},props:["data","gridApi","modalFormId","HorairesData","usersData"],data:function(){return{errors:[],isLoading:!1,form:{id:"",poste_id:"",user_id:"",faction:"",created_at:"",updated_at:"",extra_attributes:"",deleted_at:""}}},mounted:function(){this.form=this.data},methods:{EditLine:function(){var e=this;this.isLoading=!0,this.axios.post("/api/Horaireagents/"+this.form.id+"/update",this.form).then((function(t){e.isLoading=!1,e.gridApi.applyServerSideTransaction({update:[t.data]}),e.$bvModal.hide(e.modalFormId),e.$toast.success("Operation effectuer avec succes"),e.$emit("close"),console.log(t.data)})).catch((function(t){e.errors=t.response.data.errors,e.isLoading=!1,e.$toast.error("Erreur survenue lors de l'enregistrement")}))},DeleteLine:function(){var e=this;this.isLoading=!0,this.axios.post("/api/Horaireagents/"+this.form.id+"/delete").then((function(t){e.isLoading=!1,e.gridApi.applyServerSideTransaction({remove:[e.form]}),e.gridApi.refreshServerSide(),e.$bvModal.hide(e.modalFormId),e.$toast.success("Operation effectuer avec succes"),e.$emit("close"),console.log(t.data)})).catch((function(t){console.log(t.response.data),e.isLoading=!1,e.$toast.error("Erreur survenue lors de la suppression")}))}}},oe=se,ne=Object(b["a"])(oe,re,ie,!1,null,null,null),le=ne.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-overlay",{attrs:{show:e.isLoading}},[a("div",{staticClass:"parentListingsTraitements"},[e.isCheck?a("span",{staticClass:"fakeCheckBox cocher",class:{disabled:0===e.params.disabled},on:{click:function(t){t.preventDefault(),0!==e.params.disabled&&e.addAbscence()}}}):a("span",{staticClass:"fakeCheckBox",class:{disabled:0===e.params.disabled},on:{click:function(t){t.preventDefault(),0!==e.params.disabled&&e.addPresence()}}})])])],1)},ce=[],ue={name:"DaysTraitements",components:{AgGridSearch:$["a"],VSelect:d.a},props:[],data:function(){return{status:"non",isLoading:!1,etats:!1}},computed:{isCheck:function(){return 1==this.etats}},watch:{},created:function(){var e=this.params.day.toLowerCase(),t=this.params.data;this.etats=t[e]},mounted:function(){this.params.day.toLowerCase(),this.params.data},methods:{addPresence:function(){var e=this,t=this.params.data,a=this.params.day.toLowerCase();this.isLoading=!0;var r={};r[a]=1,this.axios.post("/api/horaireagents/"+t.id+"/update",r).then((function(t){e.isLoading=!1,e.etats=t.data[a]})).catch((function(t){e.isLoading=!1}))},addAbscence:function(){var e=this,t=this.params.data,a=this.params.day.toLowerCase();this.isLoading=!0;var r={};r[a]=2,this.axios.post("/api/horaireagents/"+t.id+"/update",r).then((function(t){e.isLoading=!1,e.etats=t.data[a]})).catch((function(t){e.isLoading=!1}))}}},fe=ue,me=(a("91c5"),Object(b["a"])(fe,de,ce,!1,null,"37be295f",null)),pe=me.exports,he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-overlay",{attrs:{show:e.isLoading}},[a("div",{staticClass:"parentListingsTraitements"},e._l(e.params.dropdownOptions,(function(t){return a("label",{key:t.value},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedOption,expression:"selectedOption"}],staticClass:"fakeCheckBox ",attrs:{disabled:0===e.params.disabled,type:"radio"},domProps:{value:t.label,checked:e._q(e.selectedOption,t.label)},on:{change:[function(a){e.selectedOption=t.label},e.updateStatus]}}),e._v(" "+e._s(t.label)+" ")])})),0)])],1)},ge=[],ve={name:"TypeAgentsTraitements",components:{AgGridSearch:$["a"],VSelect:d.a},props:{},data:function(){return{selectedOption:null,isLoading:!1,etats:!1,donnes:{typesagents:""}}},computed:{isCheck:function(){return 1===this.etats}},watch:{},created:function(){this.selectedOption=this.params.data.typesagents},mounted:function(){console.log("dropdownOptions",this.selectedOption)},methods:{updateStatus:function(){var e=this,t=this.params.data;this.isLoading=!0,this.donnes.typesagents=this.selectedOption,console.log("dropdownOptions",this.donnes),this.axios.post("/api/horaireagents/"+t.id+"/update",this.donnes).then((function(t){e.isLoading=!1})).catch((function(t){e.isLoading=!1}))}}},be=ve,_e=(a("f51b"),Object(b["a"])(be,he,ge,!1,null,"328892ff",null)),Ce=_e.exports,ye=a("8218"),xe={name:"HoraireagentsView",components:{DataTable:f["a"],AgGridTable:m["a"],CreateHoraireagents:ae,EditHoraireagents:le,DataModal:A["a"],AgGridSearch:$["a"],AgGridBtnClicked:E["a"],DaysTraitements:pe,TypeAgentsTraitements:Ce,CreateHoraires:ye["a"]},props:["parent","horaireId","horaires","typespostes"],data:function(){return{formId:"Horaireagents",formState:"",formData:{},formWidth:"lg",formGridApi:{},formKey:0,tableKey:0,url:"http://127.0.0.1:8000/api/horaireagents-Aggrid1",table:"Horaireagents",HorairesData:[],usersData:[],requette:2,columnDefs:null,rowData:null,gridApi:null,columnApi:null,rowModelType:null,pagination:!0,paginationPageSize:25,cacheBlockSize:10,maxBlocksInCache:1,userAdded:0,addListing:{formId:"listings",formState:"",formData:{},formWidth:"lg",formGridApi:{},formKey:0,tableKey:0,url:"http://127.0.0.1:8000/api/listings-Aggrid1",table:"Users",requette:18,columnDefs:null,rowData:null,gridApi:null,columnApi:null,rowModelType:null,pagination:!0,paginationPageSize:10,cacheBlockSize:10,maxBlocksInCache:1,extrasData:{}}}},computed:{routeData:function(){var e={meta:{}};if(window.router)try{e=window.router}catch(t){}return e},taille:function(){var e="col-sm-12";return this.filtre&&(e="col-sm-9"),e},parentId:function(){var e=0;return e=this.parent.id,e},extrasData:function(){var e={},t={};return this.horaireId?t["horaire_id"]={values:[this.horaireId],filterType:"set"}:t["horaire_id"]={values:[-1],filterType:"set"},e["baseFilter"]=t,this.tableKey++,e},days:function(){return["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"]},typeAgents:function(){return["Type Agents"]}},watch:{routeData:{handler:function(e,t){this.gridApi.setFilterModel(null),this.gridApi.refreshServerSide()},deep:!0},actualHoraire:{handler:function(e,t){this.gridApi.sizeColumnsToFit()}}},created:function(){var e=this;this.url=this.axios.defaults.baseURL+"/api/horaireagents-Aggrid1",this.formId=this.table+"_"+Date.now(),this.rowBuffer=0,this.rowModelType="serverSide",this.cacheBlockSize=50,this.maxBlocksInCache=2,this.addListing.url=this.axios.defaults.baseURL+"/api/users-Aggrid1",this.addListing.rowBuffer=0,this.addListing.rowModelType="serverSide",this.addListing.columnDefs=[{field:"id",width:100,pinned:"left",suppressColumnsToolPanel:!0,sortable:!1,headerName:"",cellRendererSelector:function(t){var a={component:"AgGridBtnClicked",params:{clicked:function(t){e.addUser(t)},render:'<div class="" style="width:100%;height:100%;background:#2885a7;color:#fff;border-radius:5px;text-align:center;cursor:pointer">  <i class="fa fa-plus"></i></div>'}};return a}},{field:"matricule",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"matricule"},{field:"nom",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"nom"},{field:"prenom",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"prenom"},{field:"num_badge",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"num_badge"}],this.addListing.cacheBlockSize=50,this.addListing.maxBlocksInCache=2,this.addListing.extrasData={baseFilter:{type:{values:[2,4],filterType:"notSet",groupWhere:10},typeseffectif_id:{values:[2,4],filterType:"notBlank",typeWhere:"OR",groupWhere:10}}}},beforeMount:function(){var e=this;this.columnDefs=[{field:"horaireagents.id",headerName:"id",suppressCellSelection:!0,maxminWidth:80,maxWidth:80,pinned:"left",cellRendererSelector:function(t){return{component:"AgGridBtnClicked",params:{clicked:function(t){e.DeleteLine(t)},render:'<div class="" style="width:100%;height:100%;background:#e31d3b;color:#fff;border-radius:5px;text-align:center;cursor:pointer">  <i class="fa-solid fa-trash-can"></i></div>'}}}},{headerName:"nom",field:"users.nom",minWidth:120,maxWidth:120,filterParams:{suppressAndOrCondition:!0},join:{table:"users",champ2:"users.id",champ1:"horaireagents.user_id",operateur:"="}},{headerName:"prenom",field:"users.prenom",minWidth:120,maxWidth:120,filterParams:{suppressAndOrCondition:!0}},{headerName:"matricule",field:"users.matricule",minWidth:120,maxWidth:120,filterParams:{suppressAndOrCondition:!0}},{headerName:"fonction",field:"fonctions.libelle",minWidth:120,maxWidth:120,filterParams:{suppressAndOrCondition:!0},join:{table:"fonctions",champ2:"fonctions.id",champ1:"users.fonction_id",operateur:"="}}],this.typeAgents.forEach((function(t){var a={field:"typesagents",suppressCellSelection:!0,minWidth:250,maxWidth:250,cellRendererSelector:function(e){return{component:"TypeAgentsTraitements",params:{dropdownOptions:[{value:1,label:"Titulaire"},{value:2,label:"Remplacant"},{value:3,label:"Conge"}]}}},headerName:t};e.columnDefs.push(a)})),this.days.forEach((function(t){var a={field:t.toLowerCase(),suppressCellSelection:!0,maxminWidth:80,maxWidth:80,cellRendererSelector:function(e){return{component:"DaysTraitements",params:{day:t}}},headerName:t[0]};e.columnDefs.push(a)}))},mounted:function(){this.requette,this.selectHoraires()},methods:{closeForm:function(){try{this.gridApi.refreshServerSide()}catch(e){}},openCreate:function(){this.showForm("Create",{},this.gridApi)},openCreateHoraire:function(){this.showForm("CreateHoraire",{},this.gridApi)},selectHoraire:function(e){this.horaireId=e},showForm:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"lg";this.formKey++,this.formWidth=r,this.formState=e,this.formData=t,this.formGridApi=a,this.$bvModal.show(this.formId)},onGridReady:function(e){console.log("on demarre",e),this.gridApi=e.api,this.columnApi=e.columnApi,this.isLoading=!1,this.gridApi.sizeColumnsToFit()},newData:function(e){this.$emit("newData",e)},getHoraires:function(){var e=this;this.axios.get("/api/horaires").then((function(t){e.requette--,e.requette,e.HorairesData=t.data})).catch((function(t){console.log(t.response.data),e.$toast.error("Erreur survenue lors de la récuperation")}))},getusers:function(){var e=this;this.axios.get("/api/users?filter[actif_id]=1&filter[type]=2").then((function(t){e.requette--,e.requette,e.usersData=t.data})).catch((function(t){console.log(t.response.data),e.$toast.error("Erreur survenue lors de la récuperation")}))},addUser:function(e){var t=this;console.log("voici les donnees ===>",e);var a={faction:this.faction,horaire_id:this.horaireId,user_id:e.id};this.isLoading=!0,this.axios.post("/api/horaireagents",a).then((function(e){t.isLoading=!1,t.userAdded++,t.$toast.success("Operation effectuer avec succes"),t.$emit("close"),console.log(e.data)})).catch((function(e){t.errors=e.response.data.errors,t.isLoading=!1,t.$toast.error("Erreur survenue lors de l'enregistrement")}))},finishAddUser:function(){this.userAdded>0&&this.tableKey++,this.userAdded=0,this.$bvModal.hide(this.formId)},DeleteLine:function(e){var t=this;this.isLoading=!0,this.axios.post("/api/horaireagents/"+e.id+"/delete").then((function(e){t.isLoading=!1,t.tableKey++,t.$toast.success("Operation effectuer avec succes"),t.$emit("close"),console.log(e.data)})).catch((function(e){console.log(e.response.data),t.isLoading=!1,t.$toast.error("Erreur survenue lors de la suppression")}))},present:function(e,t){var a=this,r={};switch(t){case"lundi":r.lun=!0;break;case"mardi":r.mar=!0;break;case"mercredi":r.mer=!0;break;case"jeudi":r.jeu=!0;break;case"vendredi":r.ven=!0;break;case"samedi":r.sam=!0;break;case"dimanche":r.dim=!0;break}this.isLoading=!0,this.axios.post("/api/horaireagents/"+e.id+"/update",r).then((function(e){a.isLoading=!1,a.tableKey++,a.$toast.success("Operation effectuer avec succes"),a.$emit("close")})).catch((function(e){console.log(e.response.data),a.isLoading=!1,a.$toast.error("Erreur survenue lors de la suppression")}))},nonpresent:function(e,t){var a=this;switch(t){case"lundi":e.lun=!1;break;case"mardi":e.mar=!1;break;case"mercredi":e.mer=!1;break;case"jeudi":e.jeu=!1;break;case"vendredi":e.ven=!1;break;case"samedi":e.sam=!1;break;case"dimanche":e.dim=!1;break}console.log("element=>",e),this.isLoading=!0,this.axios.post("/api/horaireagents/"+e.id+"/update",e).then((function(e){a.isLoading=!1,a.tableKey++,a.$toast.success("Operation effectuer avec succes"),a.$emit("close")})).catch((function(e){console.log(e.response.data),a.isLoading=!1,a.$toast.error("Erreur survenue lors de la suppression")}))}}},Se=xe,De=(a("9403"),Object(b["a"])(Se,J,Q,!1,null,null,null)),ke=De.exports,we={name:"EditPostes",components:{HoraireagentsView:ke,HorairesView:q["default"],VSelect:d.a,CustomSelect1:s["a"],CustomSelect:o["a"],Files:n["a"],PostesagentsView:M,AgGridSearch:$["a"],PointeusesPostesView:V},props:["data","gridApi","modalFormId","contratsclientsData","pointeusesData","sitesData"],data:function(){return{errors:[],isLoading:!1,actualHoraire:null,form:{id:"",code:"",libelle:"",nature:"",coordonnees:"",site_id:"",pointeuse_id:"",created_at:"",updated_at:"",extra_attributes:"",deleted_at:"",identifiants_sadge:"",creat_by:"",jours:"",contratsclient_id:"",pointeuses:[]},donne:{id:"",pointeuse_id:"",poste_id:"",created_at:"",updated_at:"",extra_attributes:"",deleted_at:"",identifiants_sadge:"",creat_by:"",jours:"",contratsclient_id:"",pointeuses:[]},formId:"users",formState:"",formData:{},formWidth:"lg",formGridApi:{},formKey:0,tableKey:0,url:"http://127.0.0.1:8000/api/pointeuses-Aggrid1",table:"users",requette:9,columnDefs:null,rowData:null,gridApi1:null,columnApi:null,rowModelType:null,pagination:!0,paginationPageSize:20,cacheBlockSize:10,maxBlocksInCache:1,agGridData:{},dateSelect:[],posteSelect:[],lastPosteSelectCount:0,read:!1,viewpointeuse:!1,actualJour:0,actualNuit:0,champsDesactiver:[],horairedata:"",horaires:[],siteCustomSelectColumns:[{headerName:"id",field:"sites.id",minWidth:120,maxWidth:120,filterParams:{suppressAndOrCondition:!0}},{headerName:"site",field:"sites.libelle",minWidth:120,maxWidth:120,filterParams:{suppressAndOrCondition:!0}},{headerName:"client",field:"clients.libelle",minWidth:120,maxWidth:120,filterParams:{suppressAndOrCondition:!0},join:{table:"clients",champ2:"clients.id",champ1:"sites.client_id",operateur:"="}}]}},created:function(){this.url=this.axios.defaults.baseURL+"/api/pointeuses-Aggrid1",this.formId=this.table+"_"+Date.now(),this.rowBuffer=0,this.rowModelType="serverSide",this.cacheBlockSize=50,this.maxBlocksInCache=2},watch:{routeData:{handler:function(e,t){this.gridApi.setFilterModel(null),this.gridApi.refreshServerSide()},deep:!0}},beforeMount:function(){var e=this;this.columnDefs=[{field:null,width:60,pinned:"left",suppressColumnsToolPanel:!0,sortable:!1,headerName:"",cellRendererSelector:function(t){var a={component:"AgGridBtnClicked",params:{clicked:function(t){e.addPointeuse(t)},render:'<div class="" style="width:100%;height:100%;background:#2885a7;color:#fff;border-radius:5px;text-align:center;cursor:pointer">  <i class="fa fa-plus"></i></div>'}};return a}},{headerName:"zone",field:"site.zone.Selectlabel"},{headerName:"site",field:"site.Selectlabel"},{hide:!0,suppressColumnsToolPanel:!0,headerName:"site",field:"site_id",valueFormatter:function(e){var t="";try{return e.data["site"]["Selectlabel"]}catch(a){}return t},filter:"CustomFiltre",filterParams:{url:this.axios.defaults.baseURL+"/api/sites-Aggrid1",columnDefs:[{field:"",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"",cellStyle:{fontSize:"11px"},valueFormatter:function(e){var t="";try{return"".concat(e.data["Selectlabel"])}catch(a){}return t}}],filterFields:["libelle"]}},{headerName:"client",field:"site.client.Selectlabel"},{field:"code",sortable:!0,maxWidth:120,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"code"},{field:"libelle",sortable:!0,filter:"agTextColumnFilter",filterParams:{suppressAndOrCondition:!0},headerName:"libelle"}]},mounted:function(){this.form=this.data,this.form.libelle=this.form.postes.libelle,console.log("voici les data ==>",this.form),this.form.horaire="",this.selectHoraireHandler(),this.$routeData.meta.postesimporter?this.champsDesactiver=["form.code","form.site_id","form.libelle","client","form.pointeuse_id","form.contratsclient_id","form.jours"]:this.champsDesactiver=[]},computed:{$routeData:function(){var e={meta:{}};try{"undefined"!=typeof window.routeData&&(e=window.routeData)}catch(t){}return e},client:function(){var e=this,t="";try{var a=this.sitesData.filter((function(t){return t.id==e.form.site_id}))[0];t=a.client.Selectlabel}catch(r){}return t},personnalHoraires:function(){return this.horaires.map((function(e){return{id:e.id,Selectlabel:"plage horaire : ".concat(e.libelle," ").concat(e.debut," - ").concat(e.fin)}}))}},methods:{openCreate:function(){this.showForm("Create",{},this.gridApi,"xl")},onGridReady:function(e){console.log("on demarre",e),this.gridApi=e.api,this.columnApi=e.columnApi,this.isLoading=!1},showForm:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"lg";this.formKey++,this.formWidth=r,this.formState=e,this.formData=t,this.formGridApi=a,this.$bvModal.show(this.formId)},isDisabled:function(e){return this.champsDesactiver.includes(e)},newDataInHoraires:function(e){var t=e.rowData.filter((function(e){return"jour"==e.horaire.libelle.toLowerCase()})).length,a=e.rowData.filter((function(e){return"nuit"==e.horaire.libelle.toLowerCase()})).length;0!=t&&(this.actualJour=t),0!=a&&(this.actualNuit=t)},newDataNuit:function(e){console.log("on as recuperer la nuit",e),this.actualNuit=e.rowCount},finishAddPointeuse:function(){this.posteSelect.length!=this.lastPosteSelectCount&&(this.lastPosteSelectCount=this.posteSelect.length,console.log("this.gridApi.refreshCells")),this.$bvModal.hide(this.formId)},addPointeuse:function(e){var t=this;this.donne.poste_id=this.form.id,this.donne.pointeuse_id=e.Selectvalue,this.isLoading=!0,this.axios.post("/api/postespointeuses",this.donne).then((function(e){t.isLoading=!1,t.posteSelect.push(e.data),t.$toast.success("Operation effectuer avec succes"),console.log(e.data)})).catch((function(e){t.errors=e.response.data.errors,t.isLoading=!1,t.$toast.error("Erreur survenue lors de l'enregistrement")}))},deletePoste:function(e){console.log("data=>",e.pivot);var t=e.pivot;t.action="detach";var a=Object.keys(t).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&");console.log("voici les donne ==>",a);var r="/api/postespointeuses/action?"+a;this.axios.get(r).then((function(e){})).catch((function(e){console.log(e)}))},EditLine:function(){var e=this;this.isLoading=!0,this.axios.post("/api/postes/"+this.form.id+"/update",this.form).then((function(t){e.isLoading=!1,e.gridApi.applyServerSideTransaction({update:[t.data]}),e.$bvModal.hide(e.modalFormId),e.$toast.success("Operation effectuer avec succes"),e.$emit("close"),console.log(t.data)})).catch((function(t){e.errors=t.response.data.errors,e.isLoading=!1,e.$toast.error("Erreur survenue lors de l'enregistrement")}))},DeleteLine:function(){var e=this;this.isLoading=!0,this.axios.post("/api/postes/"+this.form.id+"/delete").then((function(t){e.isLoading=!1,e.gridApi.applyServerSideTransaction({remove:[e.form]}),e.gridApi.refreshServerSide(),e.$bvModal.hide(e.modalFormId),e.$toast.success("Operation effectuer avec succes"),e.$emit("close"),console.log(t.data)})).catch((function(t){console.log(t.response.data),e.isLoading=!1,e.$toast.error("Erreur survenue lors de la suppression")}))},newData:function(e){console.log("voici les data 1",e),this.horaires=e;try{this.actualHoraire=this.horaires[0].id}catch(t){}console.log("voici les data 1",this.actualHoraire)},selectHoraire:function(e){this.horaires=[e]},viewpointeuses:function(){this.viewpointeuse=!0},receiveFormData:function(e){}}},Ae=we,Le=Object(b["a"])(Ae,r,i,!1,null,null,null);t["a"]=Le.exports},d2e9:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-12"},[a("AgGridSearch",{attrs:{columnDefs:e.columnDefs,extrasData:e.extrasData,filterFields:e.filterFields,url:e.url,"filter-key":e.filterKey,"filter-value":e.filterValue,paginationPageSize:10}}),a("div",{staticStyle:{"text-align":"center",margin:"5px"}},[a("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.updateFilter()}}},[e._v(" Lancer le filtre ("+e._s(e.selectElement.length)+" element selectioner)")])])],1)},i=[],s=a("2909"),o=(a("99af"),a("caad"),a("14d9"),a("a434"),a("d3b7"),a("2532"),a("99d2")),n=a("27c5"),l={name:"CustomFiltre",components:{AgGridSearch:o["a"],AgGridBtnClicked:n["a"]},data:function(){return{year:"All",colId:"",columnDefs:[],extrasData:{},filterFields:[],filterKey:"",filterValue:"",url:"",selectElement:[],lastQuery:0}},mounted:function(){var e=this;console.log("voila les paramettre passer",this.params),this.data=this.params.data,this.url=this.params.url,this.extrasData=this.params.extrasData,this.filterFields=this.params.filterFields,this.filterKey=this.params.filterKey,this.filterValue=this.params.filterValue,this.colId=this.params.column.colId,this.columnDefs=[{field:null,headerName:"",suppressCellSelection:!0,minWidth:80,maxWidth:80,pinned:"left",cellRendererSelector:function(t){console.log("element rerendu",t.data.id,e.selectElement);var a='<div class="" style="width: 20px;height: 20px;color: #fff;border-radius: 5px;text-align: center;cursor: pointer;border: 1px solid #aeaeae;">  </div>';return e.selectElement.includes(t.data.id)&&(a='<div class="" style="width: 20px;height: 20px;color: #fff;border-radius: 5px;text-align: center;cursor: pointer;background:#8ee866;border: 1px solid #aeaeae;">  </div>'),{component:"AgGridBtnClicked",params:{clicked:function(a){e.clickElement(a,t)},render:a}}}}].concat(Object(s["a"])(this.params.columnDefs))},methods:{updateFilter:function(){try{delete this.params.api["__extraFilter__".concat(this.colId)]}catch(t){}console.log("voila les paramettre passer filter 1 ");var e={};e["keys"]=this.colId,e["values"]={filterType:"set",values:this.selectElement},this.params.api.get,this.selectElement.length>0&&(this.params.api["__extraFilter__".concat(this.colId)]=e),this.lastQuery=this.selectElement.length,this.params.filterChangedCallback()},doesFilterPass:function(e){return e.data.year>=2010},isFilterActive:function(){return this.lastQuery>0},getModel:function(){},setModel:function(e){return{filterType:"set",values:[1,5,6]}},clickElement:function(e,t){if(console.log("on as desectionner un element",e,t),this.selectElement.includes(e.id)){var a=this.selectElement.indexOf(e.id);a>-1&&this.selectElement.splice(a,1)}else this.selectElement.push(e.id);t.api.applyServerSideTransaction({update:[e]})}}},d=l,c=(a("eaad"),a("2877")),u=Object(c["a"])(d,r,i,!1,null,null,null);t["a"]=u.exports},eaad:function(e,t,a){"use strict";a("74b4")},f51b:function(e,t,a){"use strict";a("41ba")},f6dd:function(e,t,a){"use strict";a("6cb2")}}]);
//# sourceMappingURL=chunk-9adb52e2.17fcb8fa.js.map